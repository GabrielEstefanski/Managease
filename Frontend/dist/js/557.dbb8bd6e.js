"use strict";(self["webpackChunkweb_project"]=self["webpackChunkweb_project"]||[]).push([[557],{7557:function(e,s,a){a.r(s),a.d(s,{default:function(){return _}});var r=a(6768),t=a(4232);const n=e=>((0,r.Qi)("data-v-6b3c43a2"),e=e(),(0,r.jt)(),e),o={class:"container"},l={class:"column gap-2 mb-3"},u=n((()=>(0,r.Lk)("label",{for:"username"},"Username",-1))),d={class:"column gap-2 mb-3"},c=n((()=>(0,r.Lk)("label",{for:"password"},"Password",-1))),i=n((()=>(0,r.Lk)("div",{class:"text-center mt-4"},[(0,r.Lk)("p",null,[(0,r.eW)("Don't have an account yet? "),(0,r.Lk)("a",{href:"/#/signup",class:"text-blue-500"},"Sign up here")])],-1))),m={class:"flex gap-3 mt-1"};function p(e,s,a,n,p,g){const v=(0,r.g2)("InputText"),f=(0,r.g2)("Password"),w=(0,r.g2)("InlineMessage"),k=(0,r.g2)("Button"),h=(0,r.g2)("Card"),b=(0,r.g2)("Toast");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(h,{class:"card",style:{width:"25rem",overflow:"hidden"}},{title:(0,r.k6)((()=>[(0,r.eW)("ManagEase")])),content:(0,r.k6)((()=>[(0,r.Lk)("div",l,[u,(0,r.bF)(v,{id:"username",modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=s=>e.username=s),invalid:!!e.error},null,8,["modelValue","invalid"])]),(0,r.Lk)("div",d,[c,(0,r.bF)(f,{id:"password",modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=s=>e.password=s),feedback:!1,inputStyle:{width:"100%"},toggleMask:"",invalid:!!e.error},null,8,["modelValue","invalid"])]),e.error?((0,r.uX)(),(0,r.Wv)(w,{key:0,severity:"error",class:"text-left",style:{width:"100%"}},{default:(0,r.k6)((()=>[(0,r.eW)((0,t.v_)(e.error),1)])),_:1})):(0,r.Q3)("",!0),i])),footer:(0,r.k6)((()=>[(0,r.Lk)("div",m,[(0,r.bF)(k,{label:"Login",class:"w-full",onClick:e.findUser},null,8,["onClick"])])])),_:1}),(0,r.bF)(b)])}a(4114);var g=a(144),v=a(1357),f=a(2151),w=a(1387),k=a(782),h=a(1459),b=(0,r.pM)({name:"LoginPage",props:{showSuccessToast:{type:Boolean,required:!1,default:!1}},mounted(){const e=(0,k.Pj)(),s=e.state.userId,a=e.state.userName;s&&a&&h.A.push("/home")},setup(e){const s=(0,g.KR)([]),a=(0,g.KR)(""),t=(0,g.KR)(""),n=(0,g.KR)(""),o=(0,w.rd)(),l=(0,k.Pj)(),u=(0,f.d)();(0,r.sV)((()=>{e.showSuccessToast&&u.add({severity:"success",summary:"Success",detail:"User registered successfully",life:3e3})}));const d=async()=>{try{await c();const e=s.value.find((e=>e.username===a.value))??null,r=await v.A.post("/login",{_id:e?._id,password:t.value});if(200===r.status){const e=r.data.message._id,s=r.data.message.name;l.commit("setUser",{id:e,name:s}),o.push("/home")}}catch(e){n.value="Invalid username or password",console.error("Error logging in",n)}},c=async()=>{try{const e=await v.A.get("/user");s.value=e.data}catch(n){console.error("Error fetching users",n)}};return{username:a,password:t,error:n,findUser:d}}}),y=a(1241);const L=(0,y.A)(b,[["render",p],["__scopeId","data-v-6b3c43a2"]]);var _=L}}]);
//# sourceMappingURL=557.dbb8bd6e.js.map