{"version":3,"file":"js/557.dbb8bd6e.js","mappings":"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","sources":["webpack://web-project/./src/views/LoginPage.vue?2a6e","webpack://web-project/./src/views/LoginPage.vue","webpack://web-project/./src/views/LoginPage.vue?fce3"],"sourcesContent":["import { createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6b3c43a2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"container\" }\nconst _hoisted_2 = { class: \"column gap-2 mb-3\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"username\" }, \"Username\", -1))\nconst _hoisted_4 = { class: \"column gap-2 mb-3\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"password\" }, \"Password\", -1))\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"text-center mt-4\" }, [\n  /*#__PURE__*/_createElementVNode(\"p\", null, [\n    /*#__PURE__*/_createTextVNode(\"Don't have an account yet? \"),\n    /*#__PURE__*/_createElementVNode(\"a\", {\n      href: \"/#/signup\",\n      class: \"text-blue-500\"\n    }, \"Sign up here\")\n  ])\n], -1))\nconst _hoisted_7 = { class: \"flex gap-3 mt-1\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_InputText = _resolveComponent(\"InputText\")!\n  const _component_Password = _resolveComponent(\"Password\")!\n  const _component_InlineMessage = _resolveComponent(\"InlineMessage\")!\n  const _component_Button = _resolveComponent(\"Button\")!\n  const _component_Card = _resolveComponent(\"Card\")!\n  const _component_Toast = _resolveComponent(\"Toast\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_Card, {\n      class: \"card\",\n      style: {\"width\":\"25rem\",\"overflow\":\"hidden\"}\n    }, {\n      title: _withCtx(() => [\n        _createTextVNode(\"ManagEase\")\n      ]),\n      content: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _hoisted_3,\n          _createVNode(_component_InputText, {\n            id: \"username\",\n            modelValue: _ctx.username,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.username) = $event)),\n            invalid: !!_ctx.error\n          }, null, 8, [\"modelValue\", \"invalid\"])\n        ]),\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createVNode(_component_Password, {\n            id: \"password\",\n            modelValue: _ctx.password,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.password) = $event)),\n            feedback: false,\n            inputStyle: { 'width': '100%' },\n            toggleMask: \"\",\n            invalid: !!_ctx.error\n          }, null, 8, [\"modelValue\", \"invalid\"])\n        ]),\n        (_ctx.error)\n          ? (_openBlock(), _createBlock(_component_InlineMessage, {\n              key: 0,\n              severity: \"error\",\n              class: \"text-left\",\n              style: {\"width\":\"100%\"}\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.error), 1)\n              ]),\n              _: 1\n            }))\n          : _createCommentVNode(\"\", true),\n        _hoisted_6\n      ]),\n      footer: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createVNode(_component_Button, {\n            label: \"Login\",\n            class: \"w-full\",\n            onClick: _ctx.findUser\n          }, null, 8, [\"onClick\"])\n        ])\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_Toast)\n  ]))\n}","<template>\r\n    <div class=\"container\">\r\n        <Card class=\"card\" style=\"width: 25rem; overflow: hidden\">\r\n            <template #title>ManagEase</template>\r\n            <template #content>\r\n                <div class=\"column gap-2 mb-3\">\r\n                    <label for=\"username\">Username</label>\r\n                    <InputText id=\"username\" v-model=\"username\" :invalid=\"!!error\"></InputText>\r\n                </div>\r\n                <div class=\"column gap-2 mb-3\">\r\n                    <label for=\"password\">Password</label>\r\n                    <Password id=\"password\" v-model=\"password\" :feedback=\"false\" :inputStyle=\"{ 'width': '100%' }\"\r\n                        toggleMask :invalid=\"!!error\"></Password>\r\n                </div>\r\n                <InlineMessage v-if=\"error\" severity=\"error\" class=\"text-left\" style=\"width: 100%;\">{{ error }}\r\n                </InlineMessage>\r\n                <div class=\"text-center mt-4\">\r\n                    <p>Don't have an account yet? <a href=\"/#/signup\" class=\"text-blue-500\">Sign up here</a></p>\r\n                </div>\r\n            </template>\r\n            <template #footer>\r\n                <div class=\"flex gap-3 mt-1\">\r\n                    <Button label=\"Login\" class=\"w-full\" @click=\"findUser\" />\r\n                </div>\r\n            </template>\r\n        </Card>\r\n        <Toast />\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, onMounted, ref } from 'vue';\r\n\r\nimport IUsers from '../interfaces/IUsers';\r\nimport axiosInstance from '@/http';\r\nimport { useToast } from 'primevue/usetoast';\r\nimport { useRouter } from 'vue-router';\r\nimport { useStore } from 'vuex';\r\nimport router from '@/router';\r\n\r\nexport default defineComponent({\r\n    name: 'LoginPage',\r\n    props: {\r\n        showSuccessToast: {\r\n            type: Boolean,\r\n            required: false,\r\n            default: false\r\n        }\r\n    },\r\n    mounted() {\r\n        const store = useStore();\r\n        const userId = store.state.userId;\r\n        const userName = store.state.userName;\r\n\r\n        if (userId && userName) {\r\n            router.push('/home');\r\n        }\r\n    },\r\n    setup(props) {\r\n        const users = ref<IUsers[]>([]);\r\n        const username = ref('');\r\n        const password = ref('');\r\n        const error = ref('');\r\n\r\n        const router = useRouter();\r\n        const store = useStore();\r\n        const toasts = useToast();\r\n\r\n        function showFailedToast() {\r\n            toasts.add({ severity: 'error', summary: 'Error', detail: 'Company with this name already exists' });\r\n        }\r\n\r\n        onMounted(() => {\r\n            if (props.showSuccessToast) {\r\n                toasts.add({ severity: 'success', summary: 'Success', detail: 'User registered successfully', life: 3000 });\r\n            }\r\n        })\r\n\r\n        const findUser = async () => {\r\n            try {\r\n                await fetchUsers();\r\n                const userFounded = users.value.find(user => user.username === username.value) ?? null;\r\n                const response = await axiosInstance.post('/login', { _id: userFounded?._id, password: password.value })\r\n                if (response.status === 200) {\r\n                    const id = response.data.message._id;\r\n                    const name = response.data.message.name;\r\n                    store.commit('setUser', { id, name });\r\n                    router.push('/home');\r\n                }\r\n            } catch (errors) {\r\n                error.value = 'Invalid username or password';\r\n                console.error('Error logging in', error);\r\n            }\r\n        };\r\n\r\n        const fetchUsers = async () => {\r\n            try {\r\n                const response = await axiosInstance.get('/user');\r\n                users.value = response.data as IUsers[];\r\n            } catch (error) {\r\n                console.error('Error fetching users', error);\r\n            }\r\n        };\r\n\r\n        return {\r\n            username,\r\n            password,\r\n            error,\r\n            findUser\r\n        };\r\n    },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100vh;\r\n    margin: 0 auto;\r\n    padding: 0 1rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n    .container {\r\n        padding: 0;\r\n    }\r\n}\r\n</style>","import { render } from \"./LoginPage.vue?vue&type=template&id=6b3c43a2&scoped=true&ts=true\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=ts\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=ts\"\n\nimport \"./LoginPage.vue?vue&type=style&index=0&id=6b3c43a2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6b3c43a2\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_createElementVNode","for","_hoisted_4","_hoisted_5","_hoisted_6","_createTextVNode","href","_hoisted_7","render","_ctx","_cache","$props","$setup","$data","$options","_component_InputText","_resolveComponent","_component_Password","_component_InlineMessage","_component_Button","_component_Card","_component_Toast","_openBlock","_createElementBlock","_createVNode","style","title","_withCtx","content","id","modelValue","username","$event","invalid","error","password","feedback","inputStyle","toggleMask","_createBlock","key","severity","default","_toDisplayString","_","_createCommentVNode","footer","label","onClick","findUser","defineComponent","name","props","showSuccessToast","type","Boolean","required","mounted","store","useStore","userId","state","userName","router","push","setup","users","ref","useRouter","toasts","useToast","onMounted","add","summary","detail","life","async","fetchUsers","userFounded","value","find","user","response","axiosInstance","post","_id","status","data","message","commit","errors","console","get","__exports__"],"sourceRoot":""}